{"ast":null,"code":"import axios from \"axios\";\nimport { loadStripe } from \"@stripe/stripe-js\"; //GET\n\nexport const getProducts = () => {\n  return new Promise((onSuccess, onFail) => {\n    axios.get('/api/products').then((response, error) => {\n      if (!response || error) {\n        return onFail(`Response failure : ${error}`);\n      }\n\n      onSuccess(response);\n    }).catch(err => onFail(err));\n  });\n};\nexport const getUser = body => {\n  return new Promise((onSuccess, onFail) => {\n    axios.get('/api/user', body.email).then((response, error) => {\n      if (!response || error) {\n        return onFail(`Response failure : ${error}`);\n      }\n\n      onSuccess(response.data);\n    }).catch(err => onFail(err));\n  });\n}; //POST\n\nexport const addUser = body => {\n  return new Promise((onSuccess, onFail) => {\n    axios.post(\"/api/users/add\", body).then((response, error) => {\n      if (!response || error) {\n        return onFail(`Response failure : ${error}`);\n      }\n\n      onSuccess(`user profile successfully created`);\n    }).catch(err => onFail(err));\n  });\n};\nexport const addOrder = body => {\n  return new Promise((onSuccess, onFail) => {\n    axios.post(\"/api/orders/add\", body).then((response, error) => {\n      if (!response || error) {\n        return onFail(`Response failure : ${error}`);\n      }\n\n      onSuccess(`order successfully saved`);\n    }).catch(err => onFail(err));\n  });\n}; //stripe\n\nexport const processPayment = async order => {\n  var stripePromise = loadStripe(\"pk_test_Y5ScLHaUyFGQYd13cNJeEMFx\");\n  const stripe = await stripePromise;\n  axios.post(\"api/create-checkout-session\", order).then(response => {\n    const sessionID = response.data.id;\n    return stripe.redirectToCheckout({\n      sessionId: sessionID\n    });\n  });\n};","map":{"version":3,"sources":["/media/haddad/6a8a543b-c57b-47b0-a06e-396959f42841/sandra-udemy/marketplace/client/src/lib/service/index.js"],"names":["axios","loadStripe","getProducts","Promise","onSuccess","onFail","get","then","response","error","catch","err","getUser","body","email","data","addUser","post","addOrder","processPayment","order","stripePromise","stripe","sessionID","id","redirectToCheckout","sessionId"],"mappings":"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","sourcesContent":["import axios from \"axios\";\nimport { loadStripe } from \"@stripe/stripe-js\";\n\n//GET\nexport const getProducts = () => {\n    return new Promise((onSuccess , onFail) => {\n       axios.get('/api/products').then((response,error) => {\n          if(!response || error) {\n              return onFail(`Response failure : ${error}`);\n        }\n        onSuccess(response);\n       })\n       .catch(err => onFail(err));\n    });\n};\nexport const getUser = body =>{\n    return new Promise((onSuccess, onFail) => {\n        axios.get('/api/user', body.email)\n        .then((response, error) => {\n            if(!response || error) {\n                return onFail(`Response failure : ${error}`);\n          }\n          onSuccess(response.data);\n        \n        })\n        .catch(err => onFail(err));\n    })\n}\n//POST\nexport const addUser = body => {\n    return new Promise((onSuccess, onFail) => {\n        axios\n        .post(\"/api/users/add\", body)\n        .then((response,error) => {\n            if(!response || error) {\n                return onFail(`Response failure : ${error}`);\n          }\n          onSuccess(`user profile successfully created`);\n        })\n        .catch(err => onFail(err));\n    });\n};\n\nexport const addOrder = (body) => {\n    return new Promise((onSuccess, onFail) => {\n      axios\n        .post(\"/api/orders/add\", body)\n        .then((response, error) => {\n          if (!response || error) {\n            return onFail(`Response failure : ${error}`);\n          }\n          onSuccess(`order successfully saved`);\n        })\n        .catch((err) => onFail(err));\n    });\n  };\n\n//stripe\nexport const processPayment = async (order) => {\n    var stripePromise = loadStripe(\"pk_test_Y5ScLHaUyFGQYd13cNJeEMFx\");\n    const stripe = await stripePromise;\n    axios.post(\"api/create-checkout-session\", order).then((response) => {\n      const sessionID = response.data.id;\n      return stripe.redirectToCheckout({ sessionId: sessionID });\n    });\n  };"]},"metadata":{},"sourceType":"module"}